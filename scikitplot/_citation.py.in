# This file is generated by scikitplot's build process
# It contains CITATION.bib results at the time of building this package.
import pathlib
from scikitplot._log import get_logger
log = get_logger(__name__)

CITATION = """@CITATION@"""

# Set the bibtex entry to the article referenced in CITATION.
def _get_bibtex():
    _bibtex = ''
    try:
        # Attempt to read the CITATION.bib file
        refs = (pathlib.Path(__file__).parent / "../CITATION.bib").read_text().split("@misc")[1:][0]
        _bibtex = f"@misc{refs}" if refs else ""
        log.debug("_bibtex from file CITATION.bib")
    except FileNotFoundError:
        # If CITATION.bib file is not found, fall back to the defined CITATION string
        refs = CITATION.split("@misc")[1:][0]
        _bibtex = f"@misc{refs}" if refs else ""
        log.debug("_bibtex from attr CITATION")
    except Exception as e:
        # Handle any unexpected errors
        log.error(f"Unexpected error while reading CITATION.bib: {e}")
    return _bibtex